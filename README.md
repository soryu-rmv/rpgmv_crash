# 作業中のRPGツクールMV強制終了によるデータ破損回避術

by 蒼竜 @soryu_rpmakermv

-------------------------------------------------

<br>

## 1. はじめに

RPGツクールMVは、2015年の発売当時からエディタの挙動に不安を覚える部分がある。  
マルチプラットフォーム化によるユーザーの裾野の広がりは歓迎されるべき点ではあるが、   
その代償として過去のツクールでは殆ど気にすることが無かった不具合も生まれている。

私が最も気にするものは、エディタの強制終了頻度の高さである。ツクールのエディタ上で扱える  
アイテムやスキル、アニメーションといったデータ数の上限は過去のツクールよりも引き下げられているが、  
実際にRPGツクールMVにおける上限いっぱいまでデータベースを作り込むと、頻繁に強制終了が起こる。   
特にプロジェクト保存時に起こる強制終了が最も痛ましく、最悪データベース用のデータを全壊させることがある。

![json](https://user-images.githubusercontent.com/64351233/80788333-c5b3cd00-8bc3-11ea-9d11-bd549341cf43.png)   

上図はプロジェクト保存時に強制終了が発生した上、アニメーションデータを保存するanimation.jsonが     
破壊されてしまった時にRPGツクールMV起動時に表示されるダイアログである。この時、    
animation.jsonは空ファイルになってしまっており、適当に修復しなければプロジェクトを再び開くことも不可能である。   

RPGツクールMVでは、プロジェクトを開いてから終了するまでの間、データベースやマップなどの情報が書き込まれたファイルを   
次々とメモリ上に展開していく。データベースファイルは、作業中に変更していなくともプロジェクト保存時に書き込まれる。     
もちろん、単に自分のパソコンのメモリを増やせば解決するなどということもない。恐らく何らかの不具合であると考えられる。
こういった挙動はもちろん有志のプラグインで変更することは不可能であるため、ツクール本体のアップデートを座して待つしかない。

発売から５年と少し待っていたが、ツクール開発の奔流はラノゲツクール、アクションゲームツクールと他方面へ向いてしまい   
自然とエディタの挙動周りにおける不具合が解決される望みは薄くなった。実際、本質的にほぼ同じなコンシューマ用移植作  
「RPGツクールMVTrinity」が発売されたが、個人的な予想通り、エディタの挙動に関する評判は決して芳しくなかった。

私はこれまで本作での作業中に、何度も突然の強制終了やデータのクラッシュによる多大な時間的損失を受けて、  
「RPGツクールMVでは本格的なRPGを作成してはならない」という啓示を受けたような気分で失意を感じたため   
不意の強制終了によるプロジェクト破壊を防止するためにRPGツクールMVでの作業中にできる自衛手段を検討した。


<br>

## 2. 強制終了が発生しうる状況
著者が遭遇した、RPGツクールMV強制終了が強制終了した瞬間を列挙する。

- 「プロジェクトの保存」を実行したとき
- データベースやイベント編集画面でOKを押したとき
- イベントの作成中 (イベントコマンド選択操作など)
- bgmフォルダに入れた楽曲を、サウンドテストで再生している状況下での作業

プロジェクト保存によるデータ破壊は以ての外であるが、

<br>

## 3. 対策

### 3.1. 項目数の多いデータベースファイルを一時移動する

### 3.2. RPGツクールMV上でのBGMの再生を控える

### 3.3. プロジェクト保存前の作成イベントのバックアップ
